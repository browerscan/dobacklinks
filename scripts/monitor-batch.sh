#!/bin/bash
# ç›‘æ§æ‰¹é‡æˆªå›¾å¤„ç†è¿›åº¦

echo "ğŸ” æ‰¹é‡æˆªå›¾å¤„ç†ç›‘æ§"
echo "================================================================================\n"

# è·å–æœ€æ–°æ—¥å¿—æ–‡ä»¶
LOG_FILE=$(ls -t /tmp/screenshot-batch-*.log 2>/dev/null | head -1)

if [ -z "$LOG_FILE" ]; then
  echo "âŒ æœªæ‰¾åˆ°æ—¥å¿—æ–‡ä»¶"
  exit 1
fi

echo "ğŸ“ æ—¥å¿—æ–‡ä»¶: $LOG_FILE"
echo ""

# æ£€æŸ¥è¿›ç¨‹æ˜¯å¦è¿è¡Œ
if pgrep -f "screenshot-only-batch" > /dev/null; then
  echo "âœ… è¿›ç¨‹è¿è¡Œä¸­"
else
  echo "âš ï¸  è¿›ç¨‹æœªè¿è¡Œ"
fi

echo ""
echo "================================================================================\n"
echo "æœ€è¿‘ 30 è¡Œæ—¥å¿—:"
echo "================================================================================\n"

tail -30 "$LOG_FILE"

echo ""
echo "================================================================================\n"
echo "å®æ—¶ç›‘æ§å‘½ä»¤: tail -f $LOG_FILE"
echo "åœæ­¢å¤„ç†å‘½ä»¤: pkill -f screenshot-only-batch"
echo "================================================================================\n"
